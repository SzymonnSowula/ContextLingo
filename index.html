<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikacja do nauki jÄ™zyka</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        textarea {
            height: 120px;
            resize: vertical;
        }
        .language-selectors {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }
        button {
            background-color: #ff6b4a;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            margin: 5px;
        }
        button:hover {
            background-color: #e55a3c;
        }
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
        .error {
            color: #d32f2f;
            background-color: #ffebee;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #d32f2f;
        }
        .warning {
            background-color: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #ffc107;
        }
        .language-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        .context-examples {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #17a2b8;
        }
        .context-examples h4 {
            margin-top: 0;
            color: #17a2b8;
        }
        .context-examples ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .context-examples li {
            margin-bottom: 5px;
            color: #666;
        }
        .stats-info {
            background-color: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #28a745;
        }
        .model-info {
            background-color: #fff3e0;
            color: #e65100;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            border-left: 4px solid #ff6b4a;
        }

        /* STYLE FISZEK */
        .flashcard-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
            display: none;
        }
        .flashcard-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .flashcard-progress {
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .flashcard-mode {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .flashcard-card {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin: 20px 0;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .flashcard-card:hover {
            transform: translateY(-5px);
        }
        .flashcard-category {
            position: absolute;
            top: 15px;
            left: 20px;
            background-color: #007bff;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }
        .flashcard-phrase {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        .flashcard-translation {
            font-size: 20px;
            color: #666;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        .flashcard-pronunciation {
            font-size: 16px;
            color: #28a745;
            font-style: italic;
            margin-top: 10px;
        }
        .flashcard-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }
        .flashcard-nav-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .flashcard-nav-button:hover {
            background-color: #0056b3;
        }
        .flashcard-nav-button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        .flashcard-reveal {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
        .flashcard-reveal:hover {
            background-color: #218838;
        }
        .flashcard-hidden {
            opacity: 0;
            transform: scale(0.95);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .flashcard-visible {
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .flashcard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .flashcard-stat {
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .flashcard-stat h4 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .flashcard-stat .number {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
        @media (max-width: 600px) {
            .flashcard-controls {
                flex-direction: column;
                align-items: stretch;
            }
            .flashcard-mode {
                justify-content: center;
            }
            .flashcard-phrase {
                font-size: 20px;
            }
            .flashcard-translation {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ Inteligentna Aplikacja do Nauki JÄ™zyka</h1>
        
       <div class="model-info">
    <strong>ğŸš€ NapÄ™dzane przez:</strong> Mistral AI - Mistral Medium Latest - Zaawansowany model jÄ™zykowy z Francji
</div>

<div class="warning" style="background-color: #fff3cd; border-left: 4px solid #ff6b4a; color: #856404;">
    <strong>âš ï¸ WAÅ»NE OSTRZEÅ»ENIE:</strong> Ta aplikacja uÅ¼ywa mojego osobistego klucza API Mistral AI. 
    <strong>ProszÄ™ o oszczÄ™dne korzystanie</strong> - kaÅ¼de wywoÅ‚anie kosztuje pieniÄ…dze! 
    Nadmierne uÅ¼ywanie moÅ¼e doprowadziÄ‡ do bankructwa ğŸ’¸. 
    UÅ¼ywaj tylko do testÃ³w i nauki. DziÄ™kujÄ™ za zrozumienie! ğŸ™
</div>
        
        <div class="language-selectors">
            <div class="form-group">
                <label for="sourceLanguage">JÄ™zyk ÅºrÃ³dÅ‚owy:</label>
                <select id="sourceLanguage">
                    <option value="polski">ğŸ‡µğŸ‡± Polski</option>
    <option value="angielski">ğŸ‡¬ğŸ‡§ Angielski</option>
    <option value="niemiecki">ğŸ‡©ğŸ‡ª Niemiecki</option>
    <option value="francuski">ğŸ‡«ğŸ‡· Francuski</option>
    <option value="wloski">ğŸ‡®ğŸ‡¹ WÅ‚oski</option>
    <option value="hiszpanski">ğŸ‡ªğŸ‡¸ HiszpaÅ„ski</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="targetLanguage">JÄ™zyk docelowy:</label>
                <select id="targetLanguage">
                    <option value="angielski">ğŸ‡¬ğŸ‡§ Angielski</option>
    <option value="polski">ğŸ‡µğŸ‡± Polski</option>
    <option value="niemiecki">ğŸ‡©ğŸ‡ª Niemiecki</option>
    <option value="francuski">ğŸ‡«ğŸ‡· Francuski</option>
    <option value="wloski">ğŸ‡®ğŸ‡¹ WÅ‚oski</option>
    <option value="hiszpanski">ğŸ‡ªğŸ‡¸ HiszpaÅ„ski</option>
                </select>
            </div>
        </div>
        
        <div class="language-info">
            <span>Kierunek tÅ‚umaczenia:</span>
            <span id="translationDirection"><strong>Polski â†’ Angielski</strong></span>
        </div>

        <div class="stats-info">
            <strong>ğŸ“Š Otrzymasz:</strong> 4-6 kategorii z minimum 10 zwrotÃ³w kaÅ¼da = 40-60+ przydatnych fraz!
        </div>
        
        <div class="context-examples">
            <h4>ğŸ’¡ PrzykÅ‚ady kontekstÃ³w:</h4>
            <ul>
                <li><strong>PodrÃ³Å¼ biznesowa:</strong> "LecÄ™ do Berlina na konferencjÄ™ IT"</li>
                <li><strong>Turystyka:</strong> "Zwiedzam ParyÅ¼ z rodzinÄ…, chcÄ™ zobaczyÄ‡ Luwr"</li>
                <li><strong>Studia:</strong> "StudiujÄ™ w Rzymie, potrzebujÄ™ pomocy z codziennymi sprawami"</li>
                <li><strong>Przeprowadzka:</strong> "Przeprowadzam siÄ™ do Amsterdamu, szukam mieszkania"</li>
                <li><strong>Wakacje:</strong> "SpÄ™dzam wakacje w Barcelonie, chcÄ™ poznaÄ‡ lokalnÄ… kuchniÄ™"</li>
            </ul>
        </div>
        
        <div class="form-group">
            <label for="context">Opisz swojÄ… sytuacjÄ™/podrÃ³Å¼:</label>
            <textarea id="context" placeholder="Np. LecÄ™ do Tokio na konferencjÄ™ IT i chcÄ™ zwiedziÄ‡ tradycyjne Å›wiÄ…tynie. PotrzebujÄ™ rÃ³wnieÅ¼ pomocy z transportem publicznym i znalezieniem dobrej restauracji."></textarea>
        </div>
        
        <div id="warningMessage" class="warning" style="display: none;"></div>
        
        <button id="generate">ğŸš€ Generuj z Mistral AI</button>
        
        <h2>ğŸ“š Twoje Spersonalizowane Frazy:</h2>
        <pre id="result">Opisz swojÄ… sytuacjÄ™ powyÅ¼ej i kliknij przycisk aby otrzymaÄ‡ bogate zbiory spersonalizowanych fraz...</pre>
        
        <div id="startLearningContainer" style="display: block; margin-top: 20px; text-align: center;">
            <button id="startLearning">ğŸ“ Rozpocznij NaukÄ™ Fiszkami</button>
        </div>

        <!-- SEKCJA FISZEK -->
        <div id="flashcardSection" class="flashcard-section">
            <h2>ğŸ¯ Nauka Fiszkami</h2>
            
            <div class="flashcard-controls">
                <div class="flashcard-progress">
                    <span id="currentCard">0</span> / <span id="totalCards">0</span>
                    <span id="currentCategory"></span>
                </div>
                
                <div class="flashcard-mode">
                    <label>
                        <input type="radio" name="learningMode" value="sourceToTarget" checked>
                        <span id="modeLabel1">Polski â†’ Angielski</span>
                    </label>
                    <label>
                        <input type="radio" name="learningMode" value="targetToSource">
                        <span id="modeLabel2">Angielski â†’ Polski</span>
                    </label>
                </div>
            </div>

            <div class="flashcard-card" id="flashcard" onclick="revealAnswer()">
                <div class="flashcard-category" id="cardCategory"></div>
                <div class="flashcard-phrase" id="cardPhrase">Kliknij "Rozpocznij NaukÄ™" aby zaczÄ…Ä‡!</div>
                <div class="flashcard-translation flashcard-hidden" id="cardTranslation"></div>
                <div class="flashcard-pronunciation flashcard-hidden" id="cardPronunciation"></div>
                <button class="flashcard-reveal" id="revealButton" onclick="revealAnswer()" style="display: none;">
                    ğŸ‘ï¸ PokaÅ¼ OdpowiedÅº
                </button>
            </div>

            <div class="flashcard-navigation">
                <button class="flashcard-nav-button" id="prevCard" onclick="previousCard()">
                    â† Poprzednia
                </button>
                <button class="flashcard-nav-button" id="shuffleCards" onclick="shuffleCards()">
                    ğŸ”€ Wymieszaj
                </button>
                <button class="flashcard-nav-button" id="nextCard" onclick="nextCard()">
                    NastÄ™pna â†’
                </button>
            </div>

            <div class="flashcard-stats">
                <div class="flashcard-stat">
                    <h4>ğŸ“Š ÅÄ…czne Frazy</h4>
                    <div class="number" id="totalPhrasesCount">0</div>
                </div>
                <div class="flashcard-stat">
                    <h4>ğŸ“š Kategorie</h4>
                    <div class="number" id="categoriesCount">0</div>
                </div>
                <div class="flashcard-stat">
                    <h4>ğŸ¯ PostÄ™p</h4>
                    <div class="number" id="progressPercent">0%</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // TwÃ³j klucz API Mistral AI
        const MISTRAL_API_KEY = prompt('Podaj swÃ³j klucz API Mistral:');
        // Zmienne globalne dla fiszek
        let flashcardData = [];
        let allPhrases = [];
        let currentIndex = 0;
        let isAnswerRevealed = false;
        
        // Mapowanie nazw jÄ™zykÃ³w
        const languageNames = {
         'polski': { name: 'Polski', englishName: 'Polish', flag: 'ğŸ‡µğŸ‡±' },
    'angielski': { name: 'Angielski', englishName: 'English', flag: 'ğŸ‡¬ğŸ‡§' },
    'niemiecki': { name: 'Niemiecki', englishName: 'German', flag: 'ğŸ‡©ğŸ‡ª' },
    'francuski': { name: 'Francuski', englishName: 'French', flag: 'ğŸ‡«ğŸ‡·' },
    'wloski': { name: 'WÅ‚oski', englishName: 'Italian', flag: 'ğŸ‡®ğŸ‡¹' },
    'hiszpanski': { name: 'HiszpaÅ„ski', englishName: 'Spanish', flag: 'ğŸ‡ªğŸ‡¸' }
        };

        // Podstawowe funkcje aplikacji
        function updateTranslationDirection() {
            const sourceLanguage = document.getElementById('sourceLanguage').value;
            const targetLanguage = document.getElementById('targetLanguage').value;
            const directionElement = document.getElementById('translationDirection');
            
            directionElement.innerHTML = `<strong>${languageNames[sourceLanguage].flag} ${languageNames[sourceLanguage].name} â†’ ${languageNames[targetLanguage].flag} ${languageNames[targetLanguage].name}</strong>`;
            
            // Aktualizuj etykiety trybÃ³w nauki
            document.getElementById('modeLabel1').textContent = `${languageNames[sourceLanguage].name} â†’ ${languageNames[targetLanguage].name}`;
            document.getElementById('modeLabel2').textContent = `${languageNames[targetLanguage].name} â†’ ${languageNames[sourceLanguage].name}`;
        }

        function validateLanguages() {
            const sourceLanguage = document.getElementById('sourceLanguage').value;
            const targetLanguage = document.getElementById('targetLanguage').value;
            const warningElement = document.getElementById('warningMessage');
            const generateButton = document.getElementById('generate');
            
            if (sourceLanguage === targetLanguage) {
                warningElement.textContent = 'âš ï¸ JÄ™zyk ÅºrÃ³dÅ‚owy i docelowy muszÄ… byÄ‡ rÃ³Å¼ne!';
                warningElement.style.display = 'block';
                generateButton.disabled = true;
                return false;
            } else {
                warningElement.style.display = 'none';
                generateButton.disabled = false;
                return true;
            }
        }

        // Event listenery
        document.getElementById('sourceLanguage').addEventListener('change', () => {
            updateTranslationDirection();
            validateLanguages();
        });

        document.getElementById('targetLanguage').addEventListener('change', () => {
            updateTranslationDirection();
            validateLanguages();
        });

        // Inicjalizacja
        updateTranslationDirection();
        validateLanguages();

        // GÅ‚Ã³wna funkcja generowania
        document.getElementById('generate').addEventListener('click', async () => {
            if (!validateLanguages()) return;
            
            const context = document.getElementById('context').value;
            const sourceLanguage = document.getElementById('sourceLanguage').value;
            const targetLanguage = document.getElementById('targetLanguage').value;
            const resultElement = document.getElementById('result');
            
            if (!context.trim()) {
                resultElement.textContent = 'âš ï¸ ProszÄ™ opisaÄ‡ swojÄ… sytuacjÄ™ lub podrÃ³Å¼ powyÅ¼ej.';
                resultElement.className = 'error';
                return;
            }
            
            resultElement.textContent = 'ğŸ§  Mistral AI analizuje TwÃ³j kontekst i generuje premium frazy...';
            resultElement.className = 'loading';
            
            // Ukryj przycisk nauki i sekcjÄ™ fiszek
            document.getElementById('startLearningContainer').style.display = 'none';
            document.getElementById('flashcardSection').style.display = 'none';

            const prompt = `Przeanalizuj podany kontekst i wygeneruj spersonalizowanÄ… listÄ™ JSON z bogatymi zbiorami fraz do nauki jÄ™zyka.

KONTEKST UÅ»YTKOWNIKA: "${context}"

INSTRUKCJE SZCZEGÃ“ÅOWEJ ANALIZY:
1. Zidentyfikuj dokÅ‚adne MIEJSCE DOCELOWE (miasto, kraj, region, dzielnica)
2. Rozpoznaj TYP PODRÃ“Å»Y/SYTUACJI (turystyka, biznes, studia, rodzina, przeprowadzka, praca, itp.)
3. OkreÅ›l WSZYSTKIE PLANOWANE AKTYWNOÅšCI (zwiedzanie, spotkania, zakupy, nauka, praca, rozrywka)
4. Wykryj SPECJALNE POTRZEBY (transport, nocleg, jedzenie, technologia, medycyna, komunikacja)
5. UwzglÄ™dnij LOKALNE SPECYFIKI (kultura, zwyczaje, etykieta, waluta, Å›wiÄ™ta)

FORMAT JSON:
Wygeneruj tablicÄ™ obiektÃ³w kategorii, gdzie kaÅ¼dy zawiera:
- "category": Nazwa kategorii w jÄ™zyku ${languageNames[sourceLanguage].englishName} (precyzyjnie dostosowana do kontekstu)
- "phrases": Tablica MINIMUM 10 najwaÅ¼niejszych fraz z polami:
  - "original": Fraza w jÄ™zyku ${languageNames[sourceLanguage].englishName}
  - "translation": DokÅ‚adne tÅ‚umaczenie na jÄ™zyk ${languageNames[targetLanguage].englishName}
  - "pronounce": Przejrzysta transkrypcja fonetyczna dla ${languageNames[targetLanguage].englishName},

WYMAGANIA SZCZEGÃ“ÅOWEGO GENEROWANIA:
- StwÃ³rz 4-6 najwaÅ¼niejszych kategorii dla danego kontekstu
- W kaÅ¼dej kategorii umieÅ›Ä‡ MINIMUM 10 praktycznych fraz (preferowane 10-15)
- UwzglÄ™dnij specyfikÄ™ miejsca docelowego (np. lokalne sÅ‚ownictwo, kulturÄ™, zwyczaje)
- Generuj frazy poziom A1-A2 (podstawowe, ale wszechstronne)
- Priorytetyzuj frazy ktÃ³re NAPRAWDÄ˜ siÄ™ przydadzÄ… w danej sytuacji
- Dodaj rÃ³Å¼norodnoÅ›Ä‡: pytania, stwierdzenia, proÅ›by, podziÄ™kowania
- UwzglÄ™dnij formalne i nieformalne warianty gdzie to stosowne
-PamiÄ™taj, Å¼e wymowa ma byÄ‡ Å‚atwa i przystÄ™pna dla jÄ™zyka docelowego

Wygeneruj wyÅ‚Ä…cznie wynik w formacie JSON, bez dodatkowych wyjaÅ›nieÅ„, komentarzy lub tekstu wprowadzajÄ…cego.`;

            try {
                const response = await fetch('https://api.mistral.ai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${MISTRAL_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'mistral-medium-latest',
                        messages: [
                            {
                                role: 'system',
                                content: 'JesteÅ› ekspertem w nauce jÄ™zykÃ³w i tworzysz spersonalizowane zestawy fraz dla podrÃ³Å¼ujÄ…cych. Generujesz tylko poprawny JSON bez dodatkowych komentarzy.'
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        temperature: 0.7,
                        max_tokens: 4000
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`HTTP error! status: ${response.status}\nDetails: ${errorText}`);
                }

                const data = await response.json();
                const content = data.choices[0]?.message?.content || 'Brak wynikÃ³w.';
                
                resultElement.textContent = content;
                resultElement.className = '';
                
                // PrÃ³ba sparsowania i sformatowania JSON
                try {
    // OczyÅ›Ä‡ markdown formatting z JSON
    let cleanedContent = content.trim();
    if (cleanedContent.startsWith('```json')) {
        cleanedContent = cleanedContent.substring(7);
    }
    if (cleanedContent.endsWith('```')) {
        cleanedContent = cleanedContent.slice(0, -3);
    }
    cleanedContent = cleanedContent.trim();
    
    const jsonContent = JSON.parse(cleanedContent);
    resultElement.textContent = JSON.stringify(jsonContent, null, 2);
    
    // SprawdÅº czy JSON ma prawidÅ‚owÄ… strukturÄ™
    if (Array.isArray(jsonContent) && jsonContent.length > 0) {
        // Zapisz dane do fiszek
        flashcardData = jsonContent;
        prepareFlashcards();
        
        // PokaÅ¼ przycisk nauki
        document.getElementById('startLearningContainer').style.display = 'block';
    } else {
        console.log('JSON nie ma prawidÅ‚owej struktury tablicy');
    }
    
} catch (e) {
    console.log('Nie udaÅ‚o siÄ™ sparsowaÄ‡ JSON:', e);
}
                
            } catch (error) {
                console.error('PeÅ‚ny bÅ‚Ä…d:', error);
                resultElement.textContent = `âŒ WystÄ…piÅ‚ bÅ‚Ä…d: ${error.message}`;
                resultElement.className = 'error';
            }
        });

        // FUNKCJE FISZEK
        function prepareFlashcards() {
    allPhrases = [];
    
    // SprawdÅº czy flashcardData jest tablicÄ… i ma dane
    if (!Array.isArray(flashcardData) || flashcardData.length === 0) {
        console.log('Brak danych flashcardData');
        return;
    }
    
    // Przygotuj wszystkie frazy z kategorii
    flashcardData.forEach(category => {
        if (category.phrases && Array.isArray(category.phrases)) {
            category.phrases.forEach(phrase => {
                allPhrases.push({
                    category: category.category,
                    original: phrase.original,
                    translation: phrase.translation,
                    pronounce: phrase.pronounce || phrase.pronunciation || 'Brak transkrypcji'
                });
            });
        }
    });
    
    console.log('Przygotowano fiszki:', allPhrases.length);
    
    // Aktualizuj statystyki
    document.getElementById('totalPhrasesCount').textContent = allPhrases.length;
    document.getElementById('categoriesCount').textContent = flashcardData.length;
    document.getElementById('totalCards').textContent = allPhrases.length;
}

        function startLearning() {
            if (allPhrases.length === 0) {
                alert('Brak fraz do nauki. Najpierw wygeneruj frazy!');
                return;
            }
            
            currentIndex = 0;
            document.getElementById('flashcardSection').style.display = 'block';
            document.getElementById('flashcardSection').scrollIntoView({ behavior: 'smooth' });
            showCurrentCard();
        }

        function showCurrentCard() {
            if (allPhrases.length === 0) return;
            
            const currentPhrase = allPhrases[currentIndex];
            const learningMode = document.querySelector('input[name="learningMode"]:checked').value;
            
            // Aktualizuj informacje o karcie
            document.getElementById('currentCard').textContent = currentIndex + 1;
            document.getElementById('currentCategory').textContent = `(${currentPhrase.category})`;
            document.getElementById('cardCategory').textContent = currentPhrase.category;
            
            // Ustaw treÅ›Ä‡ karty na podstawie trybu nauki
            if (learningMode === 'sourceToTarget') {
                document.getElementById('cardPhrase').textContent = currentPhrase.original;
                document.getElementById('cardTranslation').textContent = currentPhrase.translation;
            } else {
                document.getElementById('cardPhrase').textContent = currentPhrase.translation;
                document.getElementById('cardTranslation').textContent = currentPhrase.original;
            }
            
            document.getElementById('cardPronunciation').textContent = `ğŸ”Š ${currentPhrase.pronounce}`;
            
            // Ukryj odpowiedÅº
            hideAnswer();
            
            // Aktualizuj przyciski nawigacji
            document.getElementById('prevCard').disabled = currentIndex === 0;
            document.getElementById('nextCard').disabled = currentIndex === allPhrases.length - 1;
            
            // Aktualizuj postÄ™p
            const progress = Math.round(((currentIndex + 1) / allPhrases.length) * 100);
            document.getElementById('progressPercent').textContent = `${progress}%`;
        }

        function revealAnswer() {
            if (isAnswerRevealed) return;
            
            document.getElementById('cardTranslation').classList.remove('flashcard-hidden');
            document.getElementById('cardTranslation').classList.add('flashcard-visible');
            document.getElementById('cardPronunciation').classList.remove('flashcard-hidden');
            document.getElementById('cardPronunciation').classList.add('flashcard-visible');
            document.getElementById('revealButton').style.display = 'none';
            
            isAnswerRevealed = true;
        }

        function hideAnswer() {
            document.getElementById('cardTranslation').classList.remove('flashcard-visible');
            document.getElementById('cardTranslation').classList.add('flashcard-hidden');
            document.getElementById('cardPronunciation').classList.remove('flashcard-visible');
            document.getElementById('cardPronunciation').classList.add('flashcard-hidden');
            document.getElementById('revealButton').style.display = 'block';
            
            isAnswerRevealed = false;
        }

        function nextCard() {
            if (currentIndex < allPhrases.length - 1) {
                currentIndex++;
                showCurrentCard();
            }
        }

        function previousCard() {
            if (currentIndex > 0) {
                currentIndex--;
                showCurrentCard();
            }
        }

        function shuffleCards() {
            // Algorytm Fisher-Yates shuffle
            for (let i = allPhrases.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [allPhrases[i], allPhrases[j]] = [allPhrases[j], allPhrases[i]];
            }
            currentIndex = 0;
            showCurrentCard();
        }

        // Event listenery dla trybÃ³w nauki
        document.querySelectorAll('input[name="learningMode"]').forEach(radio => {
            radio.addEventListener('change', showCurrentCard);
        });

        // Event listener dla przycisku rozpoczÄ™cia nauki
        document.getElementById('startLearning').addEventListener('click', startLearning);

        // ObsÅ‚uga klawiatury
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('flashcardSection').style.display === 'block') {
                switch(e.key) {
                    case 'ArrowLeft':
                        previousCard();
                        break;
                    case 'ArrowRight':
                        nextCard();
                        break;
                    case ' ':
                        e.preventDefault();
                        revealAnswer();
                        break;
                }
            }
        });
    </script>
</body>
</html>
